---
import fs from 'fs';
import path from 'path';
import Layout from '../layouts/Layout.astro';
import '../styles/global.css';

const videoDir = path.resolve('./public/VideosAudios');
const files = fs.readdirSync(videoDir).filter(file => file.endsWith('.mp4'));

const beautify = (filename: string) =>
  filename
    .replace('.mp4', '')
    .replace(/[-_]/g, ' ')
    .replace(/\b\w/g, char => char.toUpperCase());
---
<Layout title="VideoAudio">

  <div
    class="relative h-72 md:h-96 bg-cover bg-[position:50%_70%] text-white flex items-center"
    style="background-image: url('/images/newPicture1.webp');"
  >
    <div class="absolute inset-0 bg-black/40"></div>
    <div class="relative z-10 px-6 text-left">
      <h1 class="text-3xl pl-25 md:text-5xl font-bold tracking-wide drop-shadow-lg mb-2">
        Video/Audio
      </h1>
    </div>
  </div>


  <section class="max-w-6xl mx-auto py-16 px-4">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
      {files.map(file => (
        <div class="bg-white dark:bg-zinc-900 p-4 rounded-2xl shadow-xl transition hover:scale-[1.01]">
          <video controls class="w-full rounded-lg shadow-md">
            <source src={`/VideosAudios/${file}`} type="video/mp4" />
            Your browser does not support the video tag.
          </video>
          <p class="mt-4 text-center text-lg font-medium text-gray-700 dark:text-gray-300">
            {beautify(file)}
          </p>
        </div>
      ))}
    </div>
  </section>
</Layout>
